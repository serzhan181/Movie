(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{230:function(e,t,n){},231:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(25),s=n.n(c),a=n(5),o=n(9),i=n(2),l=n.n(i),u=n(3),d=n(11),b=n.p+"static/media/loader.ee917082.svg",j=n(0),m=function(){return Object(j.jsx)("div",{className:"w-full h-80-screen flex-center z-50 pointer-events-none",children:Object(j.jsx)("img",{src:b,alt:"loading"})})},x=n(6),h=n(4),f="https://image.tmdb.org/t/p/original/",p="https://image.tmdb.org/t/p/w300/",v=n(54),g=n.n(v),O=g.a.create({baseURL:"https://api.themoviedb.org/3",headers:{Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI3ODE5ZGQxNmFkMTI5OTE0Yjg5YzE0NzgxYjg3YzhlNSIsInN1YiI6IjYwMmY4NjhkMzJjYzJiMDAzZjg0YTQxNyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.nQipuoOB_WLYVhqgT1zFsag02JqoYdVFExI1HlbwfAs"),"Content-Type":"application/json;charset=utf-8"}}),w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return O({url:e,method:t,params:n,headers:r})},y=function(e){var t=e.url,n=e.method,r=void 0===n?"GET":n,c=e.params,s=void 0===c?{}:c,a=e.body,o=e.headers,i={url:t,method:r,params:s,headers:void 0===o?{}:o,withCredentials:!0};return"POST"===r&&(i.data=a),g()(i)},N=function(e){return w("/movie/popular?language=en-US","GET",{page:e})},k=function(e){return w("/movie/".concat(e,"?language=en-US"),"GET")},P=function(e){return w("/movie/".concat(e,"/similar"),"GET")},I=function(e){return w("/movie/".concat(e,"/videos"))},S=function(e,t){return w("/movie?sort_by=popularity.desc&include_adult=true&include_video=false&with_genres=".concat(e),"GET",{page:t})},C=function(e,t){return w("/search/movie?query=".concat(e,"&include_adult=true"),"GET",{page:t})},E=new function e(){var t=this;Object(x.a)(this,e),this.curMovie=null,this.isLoading=!0,this.setLoading=function(e){t.isLoading=e},this.movieList=null,this.getPopularMovies=Object(u.a)(l.a.mark((function e(){var n,r,c=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>0&&void 0!==c[0]?c[0]:1,t.movieList=null,e.prev=2,e.next=5,N(n);case 5:r=e.sent,Object(h.g)((function(){t.movieList=r.data})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.warn(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),this.getSingleMovie=function(){var e=Object(u.a)(l.a.mark((function e(n){var r,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.curMovie=null,e.prev=1,e.next=4,k(n);case 4:return r=e.sent,e.next=7,I(n);case 7:return c=e.sent,e.next=10,P(n);case 10:s=e.sent,Object(h.g)((function(){t.curMovie=r.data,t.curMovie.ytId=c.data.results[0],t.curMovie.simulars=s.data.results})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.warn(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),this.getMovie=function(){var e=Object(u.a)(l.a.mark((function e(n){var r,c,s=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:1,t.movieList=null,e.prev=2,e.next=5,C(n,r);case 5:c=e.sent,Object(h.g)((function(){t.movieList=c.data})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.warn(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),this.getMovieByCategory=function(){var e=Object(u.a)(l.a.mark((function e(n,r){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.movieList=null,e.prev=1,e.next=4,S(n,r);case 4:c=e.sent,Object(h.g)((function(){t.movieList=c.data})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.warn(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),Object(h.d)(this)},L=n(8),_=n(29),M=n.n(_),T=n(42),D=n.n(T);M.a.extend(D.a);var F=function(e){var t=e.vote_average,n=e.release_date,c=e.budget,s=e.revenue,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{threshold:0},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(r.useState)(null),c=Object(L.a)(n,2),s=c[0],a=c[1],o=Object(r.useState)(!1),i=Object(L.a)(o,2),l=i[0],u=i[1];return Object(r.useEffect)((function(){var n=new IntersectionObserver((function(e){var n=Object(L.a)(e,1)[0];t&&l||u(n.isIntersecting)}),e);return s&&n.observe(s),function(){s&&n.unobserve(s)}}),[s,e,t,l]),[a,l]}({rootMargin:"0px"}),o=Object(L.a)(a,2),i=o[0],l=o[1];return Object(j.jsxs)("div",{className:"lg:w-1/2 sm:w-full",children:[Object(j.jsx)("div",{className:"mb-6",children:Object(j.jsxs)("span",{children:["Released: ",M()(n).fromNow(),"  "]})}),Object(j.jsx)("span",{children:"Vote average"}),Object(j.jsx)("div",{className:"w-60 lg:w-96 h-4 bg-gray-800 rounded-full mt-3",children:Object(j.jsx)("div",{ref:i,style:{width:"".concat(l?10*t:0,"%")},className:"h-full bg-gradient-to-r transition-all duration-700 from-red-700 to-green-700 text-center text-xs text-white rounded-full",children:t})}),Object(j.jsxs)("div",{className:"mt-6",children:[Object(j.jsxs)("div",{className:"mb-2",children:["Budget:"," ",Object(j.jsxs)("span",{className:"bg-green-900 p-0.5 rounded-xl font-light  text-gray-100",children:[c,"$"]})]}),Object(j.jsxs)("div",{children:[" ","Revenue:"," ",Object(j.jsxs)("span",{className:"p-0.5 rounded-xl font-light  text-gray-100 bg-green-900",children:[s,"$"," "]})]})]})]})},U=function(e){var t=e.tagline,n=e.overview;return Object(j.jsxs)("div",{className:"lg:w-1/2 sm:w-full",children:[t&&Object(j.jsxs)("blockquote",{className:"font-light mt-7",children:["\u201c",t,"\u201d"]}),Object(j.jsx)("h2",{className:"text-xl font-medium mt-6",children:"Overview"}),Object(j.jsx)("span",{className:"block text-left font-light text-sm",children:n})]})},A=function(e){var t=e.curMovie;e.diffDate;return Object(j.jsxs)("div",{className:"w-full sm:block lg:flex lg:justify-between lg:items-center flex-wrap",children:[Object(j.jsx)(F,{budget:null===t||void 0===t?void 0:t.budget,release_date:null===t||void 0===t?void 0:t.release_date,revenue:null===t||void 0===t?void 0:t.revenue,vote_average:null===t||void 0===t?void 0:t.vote_average}),Object(j.jsx)(U,{overview:null===t||void 0===t?void 0:t.overview,tagline:null===t||void 0===t?void 0:t.tagline})]})},q=n(92),z=n.n(q),G=document.getElementById("root"),Y=function(e){var t=e.children,n=document.createElement("div");return Object(r.useEffect)((function(){return G.appendChild(n),document.body.style.overflow="hidden",function(){G.removeChild(n),document.body.style.overflow="auto"}}),[n]),Object(c.createPortal)(t,n)},J=function(e){var t=e.handleClose,n=e.centered,r=e.className,c=e.children;return Object(j.jsx)(Y,{children:Object(j.jsx)("div",{onClick:t,className:"fixed flex justify-center inset-0 bg-black bg-opacity-70 ".concat(n&&"items-center"),"data-overlay":!0,children:Object(j.jsx)("div",{className:r,children:c})})})},V=function(e){var t=e.open,n=e.children,r=e.className,c=e.centered,s=void 0!==c&&c,a=Object(o.g)();return t?Object(j.jsx)(J,{centered:s,children:n,className:r,handleClose:function(e){e.target.dataset.overlay&&a.goBack()}}):null},B=function(e){var t=e.ytId,n=Object(o.j)().url;return Object(j.jsx)(o.b,{path:"".concat(n,"/trailer"),children:function(e){var n=e.match;return Object(j.jsx)(V,{open:Boolean(n),className:"sm:w-full md:w-2/3 md:mt-8 overflow-auto",centered:!0,children:Object(j.jsx)("div",{className:"bg-primary md:rounded-xl",children:Object(j.jsx)("div",{className:"rounded-xl overflow-hidden h-104",children:Object(j.jsx)(z.a,{url:"https://www.youtube.com/watch?v=".concat(t),controls:!0,width:"100%",height:"100%"})})})})}})},R=function(e){var t,n,r=e.curMovie,c=Object(o.h)().pathname;return Object(j.jsxs)("div",{className:"w-full h-screen relative",children:[Object(j.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-900 to-black opacity-80"}),Object(j.jsxs)("picture",{children:[Object(j.jsx)("source",{media:"(min-width: 650px)",srcSet:"".concat(f).concat(null===r||void 0===r?void 0:r.backdrop_path)}),Object(j.jsx)("source",{media:"(min-width: 365px)",srcSet:"".concat(p).concat(null===r||void 0===r?void 0:r.poster_path)}),Object(j.jsx)("img",{className:"w-full h-full object-cover",src:"".concat(f).concat(null===r||void 0===r?void 0:r.backdrop_path),alt:null===r||void 0===r?void 0:r.title})]}),Object(j.jsxs)("div",{className:"absolute left-1/2 w-full transform  -translate-x-1/2 top-14 pl-8 select-none  overflow-hidden opacity-70",children:[Object(j.jsx)("h1",{className:"text-2xl md:text-7xl opacity-70 font-bold",children:null===r||void 0===r?void 0:r.title}),Object(j.jsx)("h4",{children:null===r||void 0===r||null===(t=r.genres)||void 0===t?void 0:t.map((function(e){return e.name})).join(", ")})]}),Object(j.jsxs)("div",{className:"absolute left-1/2 transform -translate-x-1/2 bottom-14 w-min flex flex-wrap gap-2",children:[Object(j.jsx)(a.b,{className:"btn p-3 focus:bg-secondary hover:bg-primary w-full",to:"".concat(c,"/trailer"),children:"TRAILER"}),Object(j.jsx)(B,{ytId:null===r||void 0===r||null===(n=r.ytId)||void 0===n?void 0:n.key}),r.homepage&&Object(j.jsx)("a",{className:"btn p-3 focus:bg-secondary hover:bg-primary w-full",href:null===r||void 0===r?void 0:r.homepage,target:"__blank",children:"HOMEPAGE"})]})]})},Q=function(e){var t=e.imgSrc,n=e.title,r=e.releaseDate,c=e.id;return Object(j.jsxs)("li",{className:"mini-card",children:[Object(j.jsx)(a.b,{to:"/movie/".concat(c),className:"mini-card-onhover transition opacity-0 hover:opacity-70",children:Object(j.jsxs)("div",{children:[Object(j.jsx)("h4",{className:"focus-within:text-gray-300 font-medium text-lg text-center",children:n}),Object(j.jsxs)("h5",{className:"text-center",children:["(",r,")"]})]})}),Object(j.jsx)("img",{className:"w-full object-cover",src:t?"".concat(p).concat(t):"https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse3.mm.bing.net%2Fth%3Fid%3DOIP.Qw7sWxQNIOY3menRXNLNeQAAAA%26pid%3DApi&f=1",alt:n})]})},H=function(e){var t=e.simulars;return Object(j.jsxs)("div",{className:"mt-16",children:[Object(j.jsx)("h2",{className:"text-xl font-medium",children:"Relevant Movies:"}),Object(j.jsx)("section",{className:"w-full flex overflow-auto",children:Object(j.jsx)("ul",{className:"flex gap-2 m-3",children:(null===t||void 0===t?void 0:t.length)?t.map((function(e){return Object(j.jsx)(Q,{imgSrc:e.backdrop_path,releaseDate:e.release_date,title:e.title,id:e.id},e.id)})):Object(j.jsx)("h1",{className:"text-red-600 font-bold text-xl",children:"No simulars to this movie :("})})})]})},W=Object(d.a)((function(){var e,t=Object(o.i)().id;return Object(r.useEffect)((function(){window.scroll(0,0),Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.getSingleMovie(t);case 2:case"end":return e.stop()}}),e)})))()}),[t]),E.curMovie?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(R,{curMovie:E.curMovie}),Object(j.jsxs)("div",{className:"py-3 px-6",children:[Object(j.jsx)(A,{curMovie:E.curMovie}),Object(j.jsx)(H,{simulars:null===(e=E.curMovie)||void 0===e?void 0:e.simulars})]})]}):Object(j.jsx)(m,{})})),Z=[{emoji:"\ud83c\udf9e\ufe0f",label:"All",id:"0"},{emoji:"\ud83d\ude02",label:"Comedy",id:"35"},{emoji:"\ud83d\ude31",label:"Thriller",id:"53"},{emoji:"\ud83d\udc7b",label:"Horror",id:"27"},{emoji:"\ud83e\udd84",label:"Fantasy",id:"14"},{emoji:"\ud83d\udc94",label:"Drama",id:"18"},{emoji:"\ud83e\udd34",label:"History",id:"36"},{emoji:"\ud83d\udcb0",label:"Crime",id:"80"},{emoji:"\ud83e\udd8a",label:"Cartoon",id:"16"}],X=function(e){var t=e.handleGenreSet,n=e.isLoading;return Object(j.jsx)("div",{className:"mt-6",children:Object(j.jsx)("ul",{className:"flex gap-3 flex-wrap",children:Z.map((function(e){return Object(j.jsx)("li",{onClick:function(){return t(e.id)},children:Object(j.jsxs)("button",{className:"btn flex-center flex-col py-5 justify-between h-24 w-20 ".concat("0"===e.id?"bg-orange shadow-orange-active":"bg-primary-light"," ").concat(n&&"disabled:opacity-50"),disabled:n,children:[Object(j.jsx)("div",{className:"text-2xl",children:e.emoji}),Object(j.jsx)("div",{className:"text-xs font-light",children:e.label})]})},e.id)}))})})},$=function(e){var t=e.isLoading;return Object(j.jsx)(X,{handleGenreSet:function(e){alert("Unfortunatelly, the movie db changed its API and this feature is no longer available.")},isLoading:t})},K=n(28),ee=function(e){var t=e.onSubmit,n=e.register;return Object(j.jsxs)("form",{className:"mt-3 md:mt-0 p-2 bg-primary-light rounded-full w-96 flex justify-around",onSubmit:t,children:[Object(j.jsx)("input",{placeholder:"Search for movies...",className:"bg-secondary outline-none rounded-full text-sm px-2 w-10/12",type:"text",name:"query",ref:n}),Object(j.jsx)("button",{className:"btn bg-secondary w-10",type:"submit",children:Object(j.jsx)("i",{className:"icon ion-ios-search"})})]})},te=function(){var e=Object(K.b)(),t=e.register,n=e.handleSubmit,r=Object(o.g)(),c=n((function(e){var t=e.query;t&&r.push("/discover?query=".concat(t))}));return Object(j.jsx)(ee,{onSubmit:c,register:t})},ne=function(e,t){var n=new URLSearchParams(window.location.search);return window.location.search.includes(e)?n.set(e,t):n.append(e,t),n.toString()},re=function(e){var t=e.page,n=e.totalPages,r=Object(o.g)();return Object(j.jsxs)("div",{className:"flex-center mt-4",children:[Object(j.jsx)("button",{className:"btn p-2 border-2 border-secondary ".concat(+t<2&&"bg-transparent text-secondary cursor-not-allowed"),onClick:function(){+t>1&&r.push({search:ne("page",t-1)})},children:"Previous page"}),Object(j.jsx)("span",{className:"mx-3 bg-primary-light border-2 border-secondary rounded-full w-11 h-11 flex-center",children:t}),Object(j.jsx)("button",{className:"btn p-2 border-2 border-secondary ".concat(+t===n&&"bg-transparent text-secondary cursor-not-allowed"),onClick:function(){0<+t<n&&r.push({search:ne("page",t+1)})},children:"Next page"})]})},ce=function(e){var t=e.id,n=e.image,r=e.title,c=e.subtitle,s=e.history;return Object(j.jsxs)("div",{className:"card",onClick:function(){return s.push("/movie/".concat(t))},children:[Object(j.jsx)("div",{className:"onHoverExploreBtn transition",children:Object(j.jsx)("i",{className:"icons ion-ios-arrow-forward text-4xl"})}),Object(j.jsx)("img",{className:"h-full w-2/12 md:w-full object-cover object-top",src:"".concat(p).concat(n),alt:r}),Object(j.jsxs)("div",{className:"card__description",children:[Object(j.jsx)("span",{className:"text-lg font-medium",children:r}),Object(j.jsx)("span",{className:"font-light text-xs",children:c})]})]})},se=function(e){var t,n=e.movieList,r=e.history;return Object(j.jsx)("section",{className:"flex-center",children:Object(j.jsx)("div",{className:"grid w-full mt-4 md:grid-cols-4 grid-rows-4  2xl:grid-cols-5 lg:grid-cols-4 gap-2 md:gap-4",children:null===n||void 0===n||null===(t=n.results)||void 0===t?void 0:t.map((function(e){return Object(j.jsx)(ce,{id:e.id,image:e.poster_path,subtitle:"".concat(e.vote_average," \u2b50"),title:e.title,history:r},e.id)}))})})},ae=function(e){var t=e.movieList,n=Object(o.g)();return Object(j.jsx)(se,{history:n,movieList:t})},oe=function(e){var t=e.movieList;return Object(j.jsx)("main",{className:"flex-center w-full my-container",children:Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"flex flex-col md:justify-between md:flex-row",children:[Object(j.jsx)("h1",{className:"font-bold text-4xl cursor-default",children:"Dashboard"}),Object(j.jsx)(te,{})]}),Object(j.jsx)($,{isLoading:!t}),t?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(ae,{movieList:t}),Object(j.jsx)(re,{page:null===t||void 0===t?void 0:t.page,totalPages:null===t||void 0===t?void 0:t.total_pages})]}):Object(j.jsx)(m,{})]})})},ie=function(){return new URLSearchParams(Object(o.h)().search)},le=Object(d.a)((function(){var e=ie();return Object(r.useEffect)((function(){E.getPopularMovies(e.get("page")||1)}),[e.get("page"),e.get("genre")]),Object(j.jsx)(oe,{movieList:E.movieList})})),ue=function(e){var t=e.movieList;return Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("div",{className:"flex justify-center",children:Object(j.jsx)(te,{})}),t?(null===t||void 0===t?void 0:t.results.length)?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(ae,{movieList:t}),Object(j.jsx)(re,{page:null===t||void 0===t?void 0:t.page,totalPages:null===t||void 0===t?void 0:t.total_pages})]}):Object(j.jsx)("h1",{className:"text-2xl text-gray-400 h-80-screen flex-center",children:"Couldn't found any movie ;("}):Object(j.jsx)(m,{})]})},de=Object(d.a)((function(){var e=ie();return Object(r.useEffect)((function(){var t=e.get("query");t&&E.getMovie(t,e.get("page")||1)}),[e.get("query"),e.get("page")]),Object(j.jsx)(ue,{movieList:E.movieList})})),be=n(94),je=n(34),me=function(e){var t,n,r,c=e.type,s=e.onSubmit,o=e.handleDemo,i=void 0===o?"":o,l=je.a().shape({username:je.b().required("Email is required."),password:je.b().max(50,"Too long username.").required("Password is required.").min(6,"Password should be at least 6 characters long."),email:"sign up"===c&&je.b().required("Email is required.").email("should be an email.")}),u=Object(K.b)({resolver:Object(be.a)(l)}),d=u.register,b=u.handleSubmit,m=u.errors,x=u.setError;return Object(j.jsxs)("div",{className:"h-screen w-full flex-center flex-col",children:["login"===c&&Object(j.jsx)("button",{className:"btn p-2 text-xl w-24",onClick:i,type:"button",children:"DEMO"}),Object(j.jsx)("form",{onSubmit:b(s.bind(null,{type:c,setError:x})),autoComplete:"off",children:Object(j.jsxs)("div",{className:"flex-center flex-col",children:[Object(j.jsxs)("div",{className:"bg-red-200 w-96 border-red-600 text-red-600 border-l-4 p-2 mb-2 ".concat(Object.keys(m).length?"visible":"invisible"),role:"alert",children:[Object(j.jsx)("p",{children:null===(t=m.username)||void 0===t?void 0:t.message}),Object(j.jsx)("p",{children:null===(n=m.email)||void 0===n?void 0:n.message}),Object(j.jsx)("p",{children:null===(r=m.password)||void 0===r?void 0:r.message})]}),Object(j.jsxs)("div",{className:"flex relative w-full mb-4",children:[Object(j.jsx)("span",{className:"rounded-l-md inline-flex  items-center px-3 border-t bg-white border-l border-b  border-gray-300 text-gray-500 shadow-sm text-sm",children:Object(j.jsx)("i",{className:"icon ion-ios-person"})}),Object(j.jsx)("input",{ref:d,type:"text",className:" rounded-r-lg flex-1 appearance-none border border-gray-300 w-full py-2 px-4 bg-white text-gray-700 placeholder-gray-400 shadow-sm text-base focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent",name:"username",placeholder:"Username"})]}),"sign up"===c&&Object(j.jsxs)("div",{className:"flex relative w-full mb-4",children:[Object(j.jsx)("span",{className:"rounded-l-md inline-flex  items-center px-3 border-t bg-white border-l border-b  border-gray-300 text-gray-500 shadow-sm text-sm",children:Object(j.jsx)("i",{className:"icon ion-ios-mail"})}),Object(j.jsx)("input",{ref:d,type:"text",className:" rounded-r-lg flex-1 appearance-none border border-gray-300 w-full py-2 px-4 bg-white text-gray-700 placeholder-gray-400 shadow-sm text-base focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent",name:"email",placeholder:"Email"})]}),Object(j.jsxs)("div",{className:"flex relative w-full mb-2",children:[Object(j.jsx)("span",{className:"rounded-l-md inline-flex  items-center px-3 border-t bg-white border-l border-b  border-gray-300 text-gray-500 shadow-sm text-sm",children:Object(j.jsx)("i",{className:"icon ion-ios-key"})}),Object(j.jsx)("input",{ref:d({minLength:6,required:!0}),type:"text",id:"email-with-icon",className:" rounded-r-lg flex-1 appearance-none border border-gray-300 w-full py-2 px-4 bg-white text-gray-700 placeholder-gray-400 shadow-sm text-base focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent",name:"password",placeholder:"Password"})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{disabled:Object.keys(m).length>0,className:"btn p-2 text-xl w-24 capitalize disabled:opacity-50",type:"submit",children:c}),"sign up"===c&&Object(j.jsx)(a.b,{to:"/auth/login",className:"underline w-24 ml-4",children:"Demo account"})]})]})})]})},xe=function(e){return y({url:"/auth/register",method:"POST",body:e})},he=function(e){return y({url:"/auth/login",method:"POST",body:e})},fe=function(){return y({url:"/auth/logout"})},pe=function(){return y({url:"/auth/me"})},ve=new function e(){var t=this;Object(x.a)(this,e),this.user={authenticated:!1,username:null,email:null},this.register=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xe(t);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),n=e.t0.response.data.errors,e.abrupt("return",e.t0.response.data);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),this.login=function(){var e=Object(u.a)(l.a.mark((function e(n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,he(n);case 3:(c=e.sent).data.success&&Object(h.g)((function(){t.user=c.data.user,t.user.authenticated=!0})),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),r=e.t0.response.data,e.abrupt("return",e.t0.response.data);case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.me=Object(u.a)(l.a.mark((function e(){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe();case 3:if(n=e.sent,r=n.data,!t.user.authenticated){e.next=7;break}return e.abrupt("return");case 7:r.success&&Object(h.g)((function(){t.user=r.user,t.user.authenticated=!0})),e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return");case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),this.logout=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.user.authenticated){e.next=4;break}return e.next=4,fe();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),Object(h.d)(this)},ge=Object(d.a)((function(){if(ve.user.authenticated)return Object(j.jsx)(o.a,{to:"/"});var e=Object(o.j)().path,t=Object(o.g)(),n=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.login({username:"demo",password:"123456"});case 2:e.sent||t.push("/");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(){var n=Object(u.a)(l.a.mark((function n(r,c){var s,a,o,i;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=r.type,a=r.setError,"login"!==s){n.next=10;break}return n.next=4,ve.login(c);case 4:if(!(o=n.sent)||!Object.keys(o)){n.next=9;break}return Object.keys(o).forEach((function(e){a(e,{type:"manual",message:o[e].join(", ")})})),n.abrupt("return");case 9:t.push("/");case 10:if("sign up"!==s){n.next=18;break}return n.next=13,ve.register(c);case 13:if(!(i=n.sent)||!Object.keys(i)){n.next=17;break}return Object.keys(i).forEach((function(e){a(e,{type:"manual",message:i[e].join(", ")})})),n.abrupt("return");case 17:t.push("".concat(e,"/login"));case 18:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();return Object(j.jsxs)(o.d,{children:[Object(j.jsx)(o.b,{path:"".concat(e,"/login"),component:me.bind(null,{type:"login",onSubmit:r,handleDemo:n}),exact:!0}),Object(j.jsx)(o.b,{path:"".concat(e,"/signup"),component:me.bind(null,{type:"sign up",onSubmit:r}),exact:!0}),Object(j.jsx)(o.a,{to:"/"})]})})),Oe=n(7),we=n(21),ye=function(){return y({url:"/posts",method:"GET"})},Ne=function(e,t){return y({url:"/posts/".concat(e,"/").concat(t)})},ke=function(e,t){return y({url:"/posts/".concat(e,"/").concat(t,"/comments")})},Pe=function(e){var t=e.identifier,n=e.slug,r=e.value;return y({url:"/misc/vote",method:"POST",body:{identifier:t,slug:n,value:r}})},Ie=function(e){var t=e.title,n=e.body;return y({url:"/posts",method:"POST",body:{title:t,body:n}})},Se=function(e){var t=e.identifier,n=e.slug,r=e.body;return y({url:"/posts/".concat(t,"/").concat(n,"/comments"),method:"POST",body:{body:r}})},Ce=function(e){var t=e.postId,n=e.slug,r=e.commentId;return y({url:"/posts/".concat(t,"/").concat(n,"/").concat(r),method:"DELETE"})},Ee=function(e){var t=e.formData,n=e.postId,r=e.slug;return y({url:"/posts/upload_image/".concat(n,"/").concat(r),method:"POST",body:t})},Le=new function e(){var t=this;Object(x.a)(this,e),this.posts=[],this.singlePost=null,this.setPosts=function(e){t.posts=e},this.fetchPost=function(){var e=Object(u.a)(l.a.mark((function e(n,r){var c,s,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.singlePost=null,e.prev=1,e.next=4,Ne(n,r);case 4:return c=e.sent,s=c.data,e.next=8,ke(n,r);case 8:a=e.sent,o=a.data,Object(h.g)((function(){t.singlePost=Object(we.a)(Object(we.a)({},s),{},{comments:o})})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}(),this.fetchPosts=Object(u.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.posts=[],e.prev=1,e.next=4,ye();case 4:n=e.sent,Object(h.g)((function(){t.posts=n.data})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),this.createPost=function(){var e=Object(u.a)(l.a.mark((function e(n){var r,c,s,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n.file,e.next=4,Ie(n);case 4:if(c=e.sent,s=c.status,a=c.data,200!==s||!r){e.next=10;break}return e.next=10,t.uploadPostImg({formData:r,postId:a.identifier,slug:a.slug});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),this.uploadPostImg=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.formData,r=t.postId,c=t.slug,e.next=3,Ee({formData:n,postId:r,slug:c});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.vote=function(){var e=Object(u.a)(l.a.mark((function e(n){var r,c,s,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.identifier,c=n.slug,s=n.value,e.prev=1,e.next=4,Pe({identifier:r,slug:c,value:s});case 4:a=e.sent,t.singlePost&&Object(h.g)((function(){t.singlePost=Object(we.a)(Object(we.a)({},t.singlePost),{},{voteScore:a.data.voteScore,userVote:a.data.userVote})})),t.posts.forEach((function(e){e.identifier===a.data.identifier&&e.slug===a.data.slug&&Object(h.g)((function(){e.voteScore=a.data.voteScore,e.userVote=a.data.userVote}))})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),this.commentPost=function(){var e=Object(u.a)(l.a.mark((function e(n){var r,c,s,a,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.identifier,c=n.slug,null===(s=n.body)||void 0===s?void 0:s.length){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,Se({identifier:r,slug:c,body:s});case 6:a=e.sent,o=a.status,i=a.data,200===o&&Object(h.g)((function(){t.singlePost.comments=[i].concat(Object(Oe.a)(t.singlePost.comments))})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.warn(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),this.deleteComment=function(){var e=Object(u.a)(l.a.mark((function e(n){var r,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.commentId,e.prev=1,t.singlePost){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Ce({postId:t.singlePost.identifier,slug:t.singlePost.slug,commentId:r});case 6:c=e.sent,(null===(s=c.data)||void 0===s?void 0:s.success)&&Object(h.g)((function(){t.singlePost.comments=t.singlePost.comments.filter((function(e){return e.identifier!==r}))})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),Object(h.d)(this)};M.a.extend(D.a);var _e=function(e){var t=e.author_name,n=e.author_avatar,r=e.commentCount,c=e.voteScore,s=e.createdAt,o=e.identifier,i=e.slug,l=e.userVote,u=e.vote;return Object(j.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[Object(j.jsxs)(a.b,{to:"/user/".concat(t),className:"hidden lg:flex",children:[Object(j.jsx)("img",{alt:t,src:n,className:"object-cover rounded-full h-8 w-8 "}),Object(j.jsxs)("div",{className:"flex-col justify-between ml-4 text-xs",children:[Object(j.jsx)("p",{className:"text-gray-300 dark:text-white hover:underline hover:font-medium",children:t}),Object(j.jsx)("p",{className:"text-gray-400 dark:text-gray-300",children:M()(s).fromNow()})]})]}),Object(j.jsxs)(a.b,{to:"/feed/".concat(o,"/").concat(i,"#comments"),className:"flex items-center transition hover:bg-secondary w-40 h-full px-2 cursor-pointer",children:[Object(j.jsx)("i",{className:"icon ion-ios-text text-gray-300 text-2xl mr-2"}),Object(j.jsxs)("p",{children:[r," ",r>1?"Comments":"Comment"]})]}),Object(j.jsxs)("div",{className:"flex",children:[Object(j.jsxs)("div",{className:"mr-6 h-full",children:[Object(j.jsx)("i",{onClick:function(){return u({identifier:o,slug:i,value:1===l?0:1})},className:"icon ion-ios-arrow-up transition text-gray-400 text-2xl cursor-pointer mr-2 hover:bg-gray-300 ".concat(1!==l&&"hover:text-blue-500"," px-2 ").concat(1===l&&"text-red-500 bg-gray-300")}),Object(j.jsx)("i",{onClick:function(){return u({identifier:o,slug:i,value:-1===l?0:-1})},className:"icon ion-ios-arrow-down transition text-gray-400 text-2xl cursor-pointer hover:bg-gray-300 ".concat(-1!==l&&"hover:text-red-500"," px-2 ").concat(-1===l&&"text-blue-500 bg-gray-300")})]}),Object(j.jsx)("p",{className:"".concat(c>0?"text-green-600":c<0?"text-red-600":"text-yellow-500"," w-8 text-2xl font-semibold cursor-default"),children:c})]})]})},Me=function(e){var t=e.identifier,n=e.slug,r=e.title,c=e.description;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(a.b,{to:"/feed/".concat(t,"/").concat(n),children:Object(j.jsx)("p",{className:"dark:text-white text-xl font-medium mb-2",children:r})}),Object(j.jsx)("p",{className:"text-gray-400 dark:text-gray-300 font-light",children:c})]})},Te=function(e){var t=e.title,n=e.description,r=e.author_name,c=e.author_avatar,s=e.identifier,o=e.slug,i=e.commentCount,l=e.voteScore,u=e.createdAt,d=e.userVote,b=e.postImg,m=e.vote;return Object(j.jsx)("div",{className:"overflow-hidden shadow-lg lg:rounded-lg h-auto lg:w-10/12",children:Object(j.jsxs)("div",{className:"w-full h-full",children:[b&&Object(j.jsx)(a.b,{to:"/feed/".concat(s,"/").concat(o),children:Object(j.jsx)("img",{alt:"blog",src:b,className:"h-56 w-full object-cover"})}),Object(j.jsxs)("div",{className:"bg-primary-light dark:bg-gray-800 w-full px-4 pt-4 pb-2",children:[Object(j.jsx)(Me,{description:n,title:t,slug:o,identifier:s}),Object(j.jsx)(_e,{author_name:r,author_avatar:c,commentCount:i,voteScore:l,vote:m,createdAt:u,identifier:s,slug:o,userVote:d})]})]})})},De=function(e){var t=e.showBody,n=void 0!==t&&t,r=e.vote,c=e.posts;return Object(j.jsx)(j.Fragment,{children:c.map((function(e){return Object(j.jsx)(Te,{author_name:e.user.username,author_avatar:e.user.imageUrl,commentCount:e.commentCount,createdAt:e.createdAt,description:n?e.body:"",title:e.title,identifier:e.identifier,slug:e.slug,userVote:null===e||void 0===e?void 0:e.userVote,voteScore:e.voteScore,postImg:e.postImg,vote:r},e.uuid)}))})},Fe=Object(d.a)((function(){return Object(r.useEffect)((function(){Le.fetchPosts()}),[]),Object(j.jsx)("div",{className:"my-container flex-center flex-col gap-4",children:Le.posts.length?Object(j.jsx)(De,{posts:Le.posts,vote:Le.vote}):Object(j.jsx)(m,{})})})),Ue=n.p+"static/media/404.100df03c.jpg",Ae=function(e){var t=e.message,n=void 0===t?"You're alone here":t;return Object(j.jsxs)("div",{className:"bg-primary relative overflow-hidden w-full h-screen",children:[Object(j.jsx)("img",{src:Ue,className:"absolute h-full w-full object-cover",alt:"error404"}),Object(j.jsx)("div",{className:"inset-0 bg-black opacity-25 absolute"}),Object(j.jsx)("div",{className:"container mx-auto px-6 md:px-12 relative z-10 flex items-center py-32 xl:py-40",children:Object(j.jsxs)("div",{className:"w-full font-mono flex flex-col items-center relative z-10",children:[Object(j.jsx)("h1",{className:"font-extrabold text-5xl text-center text-white leading-tight mt-4",children:n}),Object(j.jsx)("p",{className:"font-extrabold text-8xl my-44 text-white animate-bounce",children:"404"})]})})]})},qe=function(e){return y({url:"/user/".concat(e)})},ze=function(e,t){return y({url:"/user/".concat(e,"/image"),method:"POST",body:t,headers:{"Content-Type":"multipart/form-data"}})},Ge=new function e(){var t=this;Object(x.a)(this,e),this.isLoading=!0,this.setIsloading=function(e){return t.isLoading=e},this.userInfo=null,this.fetchUser=function(){var e=Object(u.a)(l.a.mark((function e(n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.userInfo=null,e.prev=1,e.next=4,qe(n);case 4:return r=e.sent,c=r.data,Le.setPosts(c.posts),Object(h.g)((function(){t.userInfo=Object(we.a)(Object(we.a)({},c),{},{posts:void 0})})),e.abrupt("return");case 11:return e.prev=11,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",{error:e.t0.response.data.error});case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),this.uploadProfileImage=function(){var e=Object(u.a)(l.a.mark((function e(n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ze(t.userInfo.username,n);case 3:r=e.sent,c=r.data,t.userInfo.imageUrl=c.imageUrl,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Object(h.d)(this)},Ye=Object(d.a)((function(){var e,t,n,c,s=Object(o.i)().name,a=Object(r.useState)(null),i=Object(L.a)(a,2),d=i[0],b=i[1];Object(r.useEffect)((function(){Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=5;break}return e.next=3,Ge.fetchUser(s);case 3:(null===(t=e.sent)||void 0===t?void 0:t.error)&&b(t.error);case 5:case"end":return e.stop()}}),e)})))()}),[s]);var x=Object(r.useState)(!1),h=Object(L.a)(x,2),f=h[0],p=h[1];Object(r.useEffect)((function(){var e;ve.user.authenticated&&p(ve.user.username===(null===(e=Ge.userInfo)||void 0===e?void 0:e.username))}),[null===(e=Ge.userInfo)||void 0===e?void 0:e.username]);var v=Object(r.useRef)(null),g=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],(r=new FormData).append("file",n),e.next=5,Ge.uploadProfileImage(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return d?Object(j.jsx)(Ae,{message:d}):(null===Ge||void 0===Ge?void 0:Ge.userInfo)?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"flex-center flex-col mb-4",children:[Object(j.jsxs)("div",{className:"rounded-full h-52 w-52 relative overflow-hidden",children:[f&&Object(j.jsxs)("div",{className:"flex-center flex-col absolute inset-0 h-full opacity-0 hover:opacity-50 transition-opacity bg-black",children:[Object(j.jsx)("span",{children:"Change photo"}),Object(j.jsx)("button",{className:"btn w-32 h-12 opacity-100",onClick:function(){f&&v.current.click()},children:Object(j.jsx)("i",{className:"icon ion-ios-document"})}),Object(j.jsx)("input",{className:"invisible",type:"file",ref:v,onChange:g})]}),Object(j.jsx)("img",{src:null===(t=Ge.userInfo)||void 0===t?void 0:t.imageUrl,alt:null===(n=Ge.userInfo)||void 0===n?void 0:n.username,className:"h-full w-full object-cover"})]}),Object(j.jsx)("h3",{className:"text-2xl uppercase font-bold",children:null===(c=Ge.userInfo)||void 0===c?void 0:c.username})]}),Object(j.jsx)("div",{className:"flex-center flex-col gap-4 mb-4",children:Le.posts.length?Object(j.jsx)(De,{vote:Le.vote,posts:Le.posts}):Object(j.jsx)("div",{children:Object(j.jsx)("span",{className:"text-gray-500",children:"No posts yet."})})})]}):Object(j.jsx)(m,{})})),Je=Object(d.a)((function(e){var t=e.children,n=e.strict,r=void 0!==n&&n;return!ve.user.authenticated&&r?Object(j.jsxs)(V,{open:!0,centered:!0,className:"bg-primary-light p-2 rounded",children:[Object(j.jsx)("h1",{children:"You should be logged in to make this action."}),Object(j.jsx)(a.b,{to:"/auth/login",className:"text-blue-500 underline",children:"Log in."})]}):ve.user.authenticated?t:null})),Ve=function(e){var t=e.comments,n=e.currentUser,r=e.deleteComment;return Object(j.jsx)("div",{id:"comments",children:t.map((function(e){return Object(j.jsx)("div",{className:"overflow-hidden shadow-lg rounded-lg h-auto mb-3",children:Object(j.jsx)("div",{className:"w-full h-full",children:Object(j.jsxs)("div",{className:"bg-primary-light p-3",children:[Object(j.jsxs)("div",{className:"flex justify-between",children:[Object(j.jsx)(a.b,{to:"/user/".concat(e.username),children:Object(j.jsxs)("p",{className:"flex gap-2 text-gray-400 dark:text-gray-300 font-medium mb-2",children:[Object(j.jsx)("img",{src:e.imageUrl,className:"h-8 w-8 object-cover rounded-full",alt:e.username}),e.username]})}),e.username===(null===n||void 0===n?void 0:n.username)&&Object(j.jsx)("i",{className:"icon ion-md-trash text-xl cursor-pointer hover:text-red-500",onClick:function(){return r({commentId:e.identifier})}})]}),Object(j.jsx)("p",{className:"font-light text-sm",children:e.body})]})})},e.uuid)}))})},Be=function(e){var t=e.identifier,n=e.slug,c=e.handleCommentPost,s=Object(r.useState)(""),a=Object(L.a)(s,2),o=a[0],i=a[1];return Object(j.jsxs)("div",{className:"w-full grid grid-cols-2 mb-8",style:{gridTemplateColumns:"90% 10%"},children:[Object(j.jsx)("textarea",{placeholder:"Comment...",className:"rounded bg-secondary outline-none p-2 max-h-64",onChange:function(e){return i(e.target.value)},value:o}),Object(j.jsx)("button",{onClick:function(){c({identifier:t,slug:n,body:o}),i("")},className:"disabled:opacity-50 flex-center outline-none focus:outline-none",disabled:o.length<1,children:Object(j.jsx)("i",{className:"icon ion-md-send text-2xl bg-secondary p-3 rounded cursor-pointer hover:bg-primary-light transition",title:"send"})})]})},Re=Object(d.a)((function(){var e,t=Object(o.i)(),n=t.identifier,c=t.slug;return Object(r.useEffect)((function(){n&&c&&Le.fetchPost(n,c)}),[n,c]),Object(j.jsx)(j.Fragment,{children:Le.singlePost?Object(j.jsxs)("div",{className:"flex-center flex-col gap-4 my-container",children:[Object(j.jsx)(De,{posts:[Le.singlePost],vote:Le.vote,showBody:!0}),Object(j.jsxs)("div",{className:"w-full lg:w-3/5",children:[Object(j.jsx)(Je,{children:Object(j.jsx)(Be,{identifier:n,slug:c,handleCommentPost:Le.commentPost})}),Object(j.jsx)(Ve,{comments:(null===(e=Le.singlePost)||void 0===e?void 0:e.comments)||[],currentUser:ve.user,deleteComment:Le.deleteComment})]})]}):Object(j.jsx)(m,{})})})),Qe=function(){var e=Object(r.useState)(null),t=Object(L.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(null),a=Object(L.a)(s,2),i=a[0],d=a[1],b=Object(r.useState)(""),m=Object(L.a)(b,2),x=m[0],h=m[1],f=Object(r.useState)(""),p=Object(L.a)(f,2),v=p[0],g=p[1],O=Object(o.g)(),w=Object(r.useRef)(null),y=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.files[0],(r=new FormData).append("post_img",n),d(t.target.files[0].name),c(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),v.trim().length){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Le.createPost({title:x,body:v,file:n});case 5:O.replace("/feed");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsx)(Je,{children:Object(j.jsxs)("form",{onSubmit:N,className:"my-container flex-center flex-col",children:[Object(j.jsx)("h1",{className:"text-center text-2xl",children:"Create your awesome post!"}),Object(j.jsx)("input",{placeholder:"title",type:"text",className:"mt-4 p-2 outline-none bg-secondary w-9/12",value:x,onChange:function(e){return h(e.target.value)}}),Object(j.jsx)("textarea",{className:"bg-secondary p-2 w-9/12 mt-2 outline-none",placeholder:"Hmmm...",cols:"30",rows:"10",value:v,onChange:function(e){return g(e.target.value)}}),Object(j.jsx)("input",{type:"file",className:"hidden",ref:w,onChange:y}),Object(j.jsxs)("span",{className:"text-sm mt-2 flex",children:["preview image\u2005",Object(j.jsx)("p",{className:"text-gray-500",children:i||"(optional)"})]}),Object(j.jsx)("button",{onClick:function(){return w.current.click()},type:"button",className:"btn bg-secondary hover:bg-primary-light px-3 mt-1",children:i?Object(j.jsx)("i",{className:"icon ion-md-checkmark-circle text-green-500"}):Object(j.jsx)("i",{className:"icon ion-md-image"})}),Object(j.jsxs)("button",{className:"bg-secondary mt-6 p-2 rounded-3xl text-sm hover:bg-primary-light",disabled:v.trim().length<5,type:"submit",children:["Submit ",Object(j.jsx)("i",{className:"icon ion-md-send"})]})]})})},He=n.p+"static/media/logo.7bb40f87.svg",We=[{icon:"browsers",href:"/",title:"home",id:1},{icon:"contacts",href:"/feed",title:"feed",id:2}],Ze=Object(d.a)((function(){var e=Object(o.h)().pathname,t=Object(r.useState)(!1),n=Object(L.a)(t,2),c=n[0],s=n[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("aside",{className:"".concat(c?"":"-translate-x-full md:translate-x-0"," transform transition-transform block bg-secondary fixed left-0 top-0 h-full w-20 mr-20 z-50"),children:Object(j.jsxs)("div",{className:"flex flex-col items-center justify-between h-full",children:[Object(j.jsxs)("div",{className:"flex items-center flex-col",children:[Object(j.jsx)(a.b,{to:"/",children:Object(j.jsx)("img",{className:"w-10 mt-5",src:He,alt:"logo"})}),Object(j.jsx)("ul",{className:"mt-5",children:We.map((function(t){return Object(j.jsx)(a.b,{className:"outline-none",to:t.href,title:t.title,children:Object(j.jsx)("li",{className:"border-solid border-primary ".concat(t.href===e&&"bg-primary-light"," ").concat(t.href!==e&&"transform hover:scale-105 transition-transform"," border flex-center h-14 w-14 rounded-3xl mt-2 cursor-pointer"),children:Object(j.jsx)("i",{className:"icon ion-ios-".concat(t.icon," text-primary text-4xl")})})},t.id)}))})]}),ve.user.authenticated?Object(j.jsxs)("div",{children:[Object(j.jsx)(a.b,{to:"/user/".concat(ve.user.username),className:"border-primary border flex-center h-14 w-14 rounded-3xl mb-2 cursor-pointer overflow-hidden",title:ve.user.username,children:Object(j.jsx)("img",{src:ve.user.imageUrl,alt:ve.user.username,className:"h-full w-full object-cover"})}),Object(j.jsx)(a.b,{to:"/feed/create_post",className:"border-green-500 border flex-center h-14 w-14 rounded-3xl mb-2 cursor-pointer",title:"create post",children:Object(j.jsx)("i",{className:"icon ion-ios-add-circle-outline text-green-500 text-4xl"})}),Object(j.jsx)("div",{className:"border-red-600 border flex-center h-14 w-14 rounded-3xl mb-2 cursor-pointer",title:"logout",onClick:function(){ve.logout().then((function(){window.location.reload()}))},children:Object(j.jsx)("i",{className:"icon ion-ios-power text-red-600 text-4xl"})})]}):Object(j.jsxs)("div",{children:[Object(j.jsx)(a.b,{to:"/auth/login",className:"border-green-600 border text-green-600 font-light flex-center h-14 w-14 rounded-3xl mb-2 cursor-pointer",title:"log in",children:"LOGIN"}),Object(j.jsx)(a.b,{to:"/auth/signup",className:"border-yellow-300 border text-yellow-300 text-sm font-light flex-center h-14 w-14 rounded-3xl mb-2 cursor-pointer",title:"sign up",children:"SIGN UP"})]})]})}),Object(j.jsx)("div",{className:"md:hidden flex-center z-50 rounded fixed bottom-2 right-2 w-10 h-10 bg-secondary border border-white cursor-pointer",onClick:function(){s(!c)},children:Object(j.jsx)("i",{className:"icon ion-md-menu text-4xl"})})]})})),Xe=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Ze,{}),Object(j.jsx)("main",{className:"main-content",children:Object(j.jsxs)(o.d,{children:[Object(j.jsx)(o.b,{exact:!0,path:"/",component:le}),Object(j.jsx)(o.b,{path:"/auth",component:ge}),Object(j.jsx)(o.b,{path:"/movie/:id",component:W}),Object(j.jsx)(o.b,{path:"/discover",component:de}),Object(j.jsx)(o.b,{path:"/feed/:identifier/:slug",component:Re}),Object(j.jsx)(o.b,{path:"/feed/create_post",component:Qe}),Object(j.jsx)(o.b,{path:"/feed",component:Fe}),Object(j.jsx)(o.b,{path:"/user/:name",component:Ye}),Object(j.jsx)(o.b,{path:"*",component:Ae})]})})]})},$e=Object(r.createContext)(null),Ke=function(e){var t=e.children;return Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.me();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(j.jsx)($e.Provider,{value:ve.user,children:t})};n(230);s.a.render(Object(j.jsx)(a.a,{children:Object(j.jsx)(Ke,{children:Object(j.jsx)(Xe,{})})}),document.getElementById("root"))}},[[231,14,15]]]);
//# sourceMappingURL=main.40bec01b.chunk.js.map